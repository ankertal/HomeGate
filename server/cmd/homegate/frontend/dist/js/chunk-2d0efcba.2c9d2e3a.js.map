{"version":3,"sources":["webpack:///./src/views/BoardUser.vue?56c0","webpack:///src/views/BoardUser.vue","webpack:///./src/views/BoardUser.vue?5fff","webpack:///./src/views/BoardUser.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","currentUser","username","successful","_e","class","content","_l","gate","index","key","attrs","isMyGate","staticStyle","_m","on","$event","gateCommand","deleteGate","addUser","directives","name","rawName","value","expression","domProps","target","composing","email","msg","my_gate","item","dismissCountDown","alertVariant","countDownChanged","message","staticRenderFns","computed","$store","state","auth","user","data","cmdError","showCommandStatus","newGateText","newUserText","ismissCountDown","showDismissibleAlert","watch","validateEmail","mounted","methods","addGate","gates","push","currentGate","myGate","splice","test","users","showAlert","variant","component"],"mappings":"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","file":"js/chunk-2d0efcba.2c9d2e3a.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('header',{staticClass:\"jumbotron\"},[_c('h3',[_vm._v(\"\\n      HomeGate's \"),_c('strong',[_vm._v(_vm._s(_vm.currentUser.username))]),_vm._v(\" Settings:\\n    \")])]),(!_vm.successful)?_c('div',[(_vm.content)?_c('div',{staticClass:\"alert\",class:_vm.successful ? 'alert-success' : 'alert-danger'},[_vm._v(\"\\n      \"+_vm._s(_vm.content)+\"\\n    \")]):_vm._e()]):_vm._e(),(_vm.successful)?_c('div',[_c('strong',[_vm._v(\"Gates:\")]),_c('ul',_vm._l((_vm.content.gates),function(gate,index){return _c('li',{key:index},[_c('nav',{staticClass:\"navbar navbar-expand-lg navbar-light bg-light\"},[_c('a',{staticClass:\"navbar-brand\",attrs:{\"href\":\"#\"}},[(_vm.isMyGate(index))?_c('span',{staticStyle:{\"color\":\"red\"}},[_vm._v(_vm._s(gate))]):_vm._e(),(!_vm.isMyGate(index))?_c('span',{staticStyle:{\"color\":\"blue\"}},[_vm._v(_vm._s(gate))]):_vm._e()]),_vm._m(0,true),_c('div',{staticClass:\"collapse navbar-collapse\",attrs:{\"id\":\"navbarNav\"}},[_c('ul',{staticClass:\"navbar-nav\"},[_c('b-button',{attrs:{\"pill\":\"\",\"variant\":\"outline-success\",\"size\":\"sm\"},on:{\"click\":function($event){return _vm.gateCommand(index, 'is_open')}}},[_vm._v(\"Open\")]),_c('b-button',{attrs:{\"pill\":\"\",\"variant\":\"outline-warning\",\"size\":\"sm\"},on:{\"click\":function($event){return _vm.gateCommand(index, 'is_close')}}},[_vm._v(\"Close\")]),_c('b-button',{attrs:{\"pill\":\"\",\"variant\":\"outline-danger\",\"size\":\"sm\",\"disabled\":_vm.isMyGate(index)},on:{\"click\":function($event){return _vm.deleteGate(index)}}},[_vm._v(\"\\n                Delete\\n              \")]),(_vm.isMyGate(index))?_c('div',{staticClass:\"input-group input-group-sm mb-3\"},[_c('div',{staticClass:\"input-group-prepend\"},[_c('b-button',{attrs:{\"pill\":\"\",\"variant\":\"outline-dark\",\"size\":\"sm\"},on:{\"click\":function($event){return _vm.addUser(index)}}},[_vm._v(\"Add User\")])],1),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.email),expression:\"email\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"required\":\"\"},domProps:{\"value\":(_vm.email)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.email=$event.target.value}}}),(_vm.msg.email)?_c('span',[_vm._v(\"  \"+_vm._s(_vm.msg.email))]):_vm._e()]):_vm._e()],1)])])])}),0)]):_vm._e(),(_vm.successful)?_c('div',[_c('strong',[_vm._v(\"My (\"+_vm._s(_vm.currentUser.my_gate)+\") friends: \")]),_c('ul',{attrs:{\"id\":\"uses-list\"}},_vm._l((this.content.users),function(item,index){return _c('li',[_vm._v(\"\\n        \"+_vm._s(item)+\"\\n      \")])}),0)]):_vm._e(),(this.showCommandStatus)?_c('div',[_c('b-alert',{attrs:{\"show\":_vm.dismissCountDown,\"variant\":_vm.alertVariant,\"dismissible\":\"\"},on:{\"dismiss-count-down\":_vm.countDownChanged}},[_vm._v(\"\\n      \"+_vm._s(this.message))])],1):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"navbar-toggler\",attrs:{\"type\":\"button\",\"data-toggle\":\"collapse\",\"data-target\":\"#navbarNav\",\"aria-controls\":\"navbarNav\",\"aria-expanded\":\"false\",\"aria-label\":\"Toggle navigation\"}},[_c('span',{staticClass:\"navbar-toggler-icon\"})])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"container\">\n    <header class=\"jumbotron\">\n      <h3>\n        HomeGate's <strong>{{ currentUser.username }}</strong> Settings:\n      </h3>\n    </header>\n    <div v-if=\"!successful\">\n      <div\n        v-if=\"content\"\n        class=\"alert\"\n        :class=\"successful ? 'alert-success' : 'alert-danger'\"\n      >\n        {{ content }}\n      </div>\n    </div>\n\n    <div v-if=\"successful\">\n      <strong>Gates:</strong>\n      <ul>\n        <li v-for=\"(gate, index) in content.gates\" :key=\"index\">\n          <nav class=\"navbar navbar-expand-lg navbar-light bg-light\">\n            <a class=\"navbar-brand\" href=\"#\"\n              ><span v-if=\"isMyGate(index)\" style=\"color: red\">{{ gate }}</span>\n              <span v-if=\"!isMyGate(index)\" style=\"color: blue\">{{ gate }}</span></a\n            >\n            <button\n              class=\"navbar-toggler\"\n              type=\"button\"\n              data-toggle=\"collapse\"\n              data-target=\"#navbarNav\"\n              aria-controls=\"navbarNav\"\n              aria-expanded=\"false\"\n              aria-label=\"Toggle navigation\"\n            >\n              <span class=\"navbar-toggler-icon\"></span>\n            </button>\n            <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\n              <ul class=\"navbar-nav\">\n                <b-button\n                  pill\n                  variant=\"outline-success\"\n                  size=\"sm\"\n                  @click=\"gateCommand(index, 'is_open')\"\n                  >Open</b-button\n                >\n\n                <b-button\n                  pill\n                  variant=\"outline-warning\"\n                  size=\"sm\"\n                  @click=\"gateCommand(index, 'is_close')\"\n                  >Close</b-button\n                >\n\n                <b-button\n                  pill\n                  variant=\"outline-danger\"\n                  size=\"sm\"\n                  @click=\"deleteGate(index)\"\n                  :disabled=\"isMyGate(index)\"\n                >\n                  Delete\n                </b-button>\n\n                <div v-if=\"isMyGate(index)\" class=\"input-group input-group-sm mb-3\">\n                  <div class=\"input-group-prepend\">\n                    <b-button\n                      pill\n                      variant=\"outline-dark\"\n                      size=\"sm\"\n                      @click=\"addUser(index)\"\n                      >Add User</b-button\n                    >\n                  </div>\n                  <input class=\"form-control\" type=\"text\" v-model=\"email\" required />\n                  <span v-if=\"msg.email\">&nbsp;&nbsp;{{ msg.email }}</span>\n                </div>\n              </ul>\n            </div>\n          </nav>\n        </li>\n      </ul>\n\n      <!-- <div id=\"gate-list\">\n        <form v-on:submit.prevent=\"addGate\">\n          <label for=\"new-gate\">Add a gate to {{ currentUser.username }}: </label>\n          &nbsp;&nbsp;\n          <input v-model=\"newGateText\" id=\"new-gate\" placeholder=\"e.g. gate-XXXXXX\" />\n          <button>Add</button>\n        </form>\n      </div> -->\n    </div>\n\n    <div v-if=\"successful\">\n      <strong>My ({{ currentUser.my_gate }}) friends: </strong>\n      <ul id=\"uses-list\">\n        <li v-for=\"(item, index) in this.content.users\">\n          {{ item }}\n        </li>\n      </ul>\n    </div>\n\n    <div v-if=\"this.showCommandStatus\">\n      <b-alert\n        :show=\"dismissCountDown\"\n        :variant=\"alertVariant\"\n        dismissible\n        @dismiss-count-down=\"countDownChanged\"\n      >\n        {{ this.message }}</b-alert\n      >\n    </div>\n  </div>\n</template>\n\n<script>\nimport UserService from \"../services/user.service\";\n\nexport default {\n  name: \"User\",\n  computed: {\n    currentUser() {\n      return this.$store.state.auth.user;\n    },\n  },\n  data() {\n    return {\n      content: \"\",\n      message: \"\",\n      cmdError: false,\n      showCommandStatus: false,\n      successful: false,\n      newGateText: \"\",\n      newUserText: \"\",\n      msg: [],\n      email: \"\",\n      ismissCountDown: null,\n      showDismissibleAlert: false,\n      alertVariant: \"info\",\n    };\n  },\n  watch: {\n    email(value) {\n      // binding this to the data value in the email input\n      this.email = value;\n      this.validateEmail(value);\n    },\n  },\n  mounted() {\n    UserService.getUserBoard().then(\n      (response) => {\n        this.content = response.data;\n        this.successful = true;\n        this.items = this.content.gates;\n      },\n      (error) => {\n        this.successful = false;\n        this.content =\n          (error.response && error.response.data && error.response.data.message) ||\n          error.message ||\n          error.toString();\n      }\n    );\n  },\n  methods: {\n    addGate: function () {\n      if (this.newGateText != \"\") {\n        this.content.gates.push(this.newGateText);\n        this.newGateText = \"\";\n      }\n    },\n    deleteGate(index) {\n      const currentGate = this.content.gates[index];\n      const myGate = this.content.user_gate;\n      if (currentGate != myGate) {\n        this.content.gates.splice(index, 1);\n      }\n    },\n    isMyGate(index) {\n      const currentGate = this.content.gates[index];\n      const myGate = this.content.my_gate;\n      return currentGate === myGate;\n    },\n    gateCommand(index, cmd) {\n      this.message = \"\";\n      this.cmdError = false;\n      const currentGate = this.content.gates[index];\n      // const myGate = this.content.my_gate;\n      // if (currentGate == myGate) {\n      // open the gate\n      UserService.triggerCommand(this.currentUser, currentGate, cmd).then(\n        (response) => {\n          if (response.isAxiosError || response.is_error) {\n            this.message = response.message;\n            this.showCommandStatus = true;\n            this.showAlert(\"danger\");\n          } else {\n            this.cmdError = response.is_error;\n            this.message = response.message;\n            this.showCommandStatus = !this.cmdError;\n            this.showAlert(\"info\");\n          }\n        },\n        (error) => {\n          this.cmdError = true;\n          this.message =\n            (error.response && error.response.data && error.response.data.message) ||\n            error.message ||\n            error.toString();\n          this.showAlert(\"danger\");\n        }\n      );\n      //}\n    },\n    addUser: function () {\n      if (/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(this.email)) {\n        this.content.users.push(this.email);\n        this.newUserText = \"\";\n      }\n    },\n    validateEmail(value) {\n      if (/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(value)) {\n        this.msg[\"email\"] = \"\";\n      } else {\n        this.msg[\"email\"] = \"Invalid Email\";\n      }\n    },\n    countDownChanged(dismissCountDown) {\n      this.dismissCountDown = dismissCountDown;\n    },\n    showAlert(variant) {\n      this.dismissCountDown = 2;\n      this.alertVariant = variant;\n    },\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoardUser.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoardUser.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BoardUser.vue?vue&type=template&id=f74b98a6&\"\nimport script from \"./BoardUser.vue?vue&type=script&lang=js&\"\nexport * from \"./BoardUser.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}