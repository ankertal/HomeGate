{"version":3,"sources":["webpack:///./src/views/BoardUser.vue?594f","webpack:///src/views/BoardUser.vue","webpack:///./src/views/BoardUser.vue?5fff","webpack:///./src/views/BoardUser.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","currentUser","username","successful","_e","class","content","_l","gate","index","key","attrs","isMyGate","staticStyle","on","$event","gateCommand","deleteGate","my_gate","item","isEmailValid","email","model","value","callback","$$v","expression","addUser","deleteUser","dismissCountDown","alertVariant","countDownChanged","message","staticRenderFns","name","computed","$store","state","auth","user","data","cmdError","showCommandStatus","newGateText","msg","ismissCountDown","showDismissibleAlert","mounted","methods","addGate","gates","push","currentGate","myGate","splice","test","users","includes","indexOf","showAlert","variant","component"],"mappings":"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","file":"js/chunk-2d0efcba.0469b512.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('header',{staticClass:\"jumbotron\"},[_c('h3',[_vm._v(\"\\n      HomeGate's \"),_c('strong',[_vm._v(_vm._s(_vm.currentUser.username))]),_vm._v(\" Settings:\\n    \")])]),(!_vm.successful)?_c('div',[(_vm.content)?_c('div',{staticClass:\"alert\",class:_vm.successful ? 'alert-success' : 'alert-danger'},[_vm._v(\"\\n      \"+_vm._s(_vm.content)+\"\\n    \")]):_vm._e()]):_vm._e(),(_vm.successful)?_c('div',[_c('strong',[_vm._v(\"Gates:\")]),_c('ul',_vm._l((_vm.content.gates),function(gate,index){return _c('li',{key:index},[_c('nav',{staticClass:\"navbar navbar-expand-lg navbar-light bg-light\"},[_c('a',{staticClass:\"navbar-brand\",attrs:{\"href\":\"#\"}},[(_vm.isMyGate(index))?_c('span',{staticStyle:{\"color\":\"blue\"}},[_vm._v(_vm._s(gate))]):_vm._e(),(!_vm.isMyGate(index))?_c('span',{staticStyle:{\"color\":\"indigo\"}},[_vm._v(_vm._s(gate))]):_vm._e()]),_c('div',[_c('b-dropdown',{staticClass:\"m-2\",attrs:{\"id\":\"gate-options\",\"text\":\"Options\",\"variant\":\"primary\",\"size\":\"sm\"}},[_c('b-dropdown-item',{attrs:{\"active\":\"\"},on:{\"click\":function($event){return _vm.gateCommand(index, 'is_open')}}},[_vm._v(\"Open\")]),_c('b-dropdown-item',{on:{\"click\":function($event){return _vm.gateCommand(index, 'is_close')}}},[_vm._v(\"Close\")]),(_vm.isMyGate(index))?_c('span',[_c('b-dropdown-item',{attrs:{\"disabled\":\"\"}},[_vm._v(\"Delete\")])],1):_c('span',[_c('b-dropdown-item',{on:{\"click\":function($event){return _vm.deleteGate(index)}}},[_vm._v(\"Delete\")])],1)],1)],1)])])}),0)]):_vm._e(),(_vm.successful)?_c('div',[_c('strong',[_vm._v(\"My (\"+_vm._s(_vm.currentUser.my_gate)+\") friends: \")]),_c('ul',{attrs:{\"id\":\"uses-list\"}},_vm._l((this.content.users),function(item,index){return _c('li',{key:item},[_vm._v(\"\\n        \"+_vm._s(item)+\"\\n      \")])}),0),_c('b-input-group',{staticClass:\"mt-3\",attrs:{\"prepend\":\"Friend:\"}},[_c('b-form-input',{attrs:{\"state\":_vm.isEmailValid(this.email)},model:{value:(_vm.email),callback:function ($$v) {_vm.email=$$v},expression:\"email\"}}),_c('b-input-group-append',[_c('b-button',{attrs:{\"variant\":\"outline-success\"},on:{\"click\":function($event){return _vm.addUser(_vm.currentUser.my_gate)}}},[_vm._v(\"Add\")]),_c('b-button',{attrs:{\"variant\":\"info\"},on:{\"click\":function($event){return _vm.deleteUser(_vm.currentUser.my_gate)}}},[_vm._v(\"Delete\")])],1)],1)],1):_vm._e(),(this.showCommandStatus)?_c('div',[_c('b-alert',{attrs:{\"show\":_vm.dismissCountDown,\"variant\":_vm.alertVariant,\"dismissible\":\"\"},on:{\"dismiss-count-down\":_vm.countDownChanged}},[_vm._v(\"\\n      \"+_vm._s(this.message))])],1):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"container\">\n    <header class=\"jumbotron\">\n      <h3>\n        HomeGate's <strong>{{ currentUser.username }}</strong> Settings:\n      </h3>\n    </header>\n    <div v-if=\"!successful\">\n      <div\n        v-if=\"content\"\n        class=\"alert\"\n        :class=\"successful ? 'alert-success' : 'alert-danger'\"\n      >\n        {{ content }}\n      </div>\n    </div>\n\n    <div v-if=\"successful\">\n      <strong>Gates:</strong>\n      <ul>\n        <li v-for=\"(gate, index) in content.gates\" :key=\"index\">\n          <nav class=\"navbar navbar-expand-lg navbar-light bg-light\">\n            <a class=\"navbar-brand\" href=\"#\"\n              ><span v-if=\"isMyGate(index)\" style=\"color: blue\">{{ gate }}</span>\n              <span v-if=\"!isMyGate(index)\" style=\"color: indigo\">{{ gate }}</span></a\n            >\n            <div>\n              <b-dropdown\n                id=\"gate-options\"\n                text=\"Options\"\n                variant=\"primary\"\n                size=\"sm\"\n                class=\"m-2\"\n              >\n                <b-dropdown-item @click=\"gateCommand(index, 'is_open')\" active\n                  >Open</b-dropdown-item\n                >\n                <b-dropdown-item @click=\"gateCommand(index, 'is_close')\"\n                  >Close</b-dropdown-item\n                >\n                <span v-if=\"isMyGate(index)\">\n                  <b-dropdown-item disabled>Delete</b-dropdown-item>\n                </span>\n                <span v-else>\n                  <b-dropdown-item @click=\"deleteGate(index)\">Delete</b-dropdown-item>\n                </span>\n              </b-dropdown>\n            </div>\n          </nav>\n        </li>\n      </ul>\n\n      <!-- <div id=\"gate-list\">\n        <form v-on:submit.prevent=\"addGate\">\n          <label for=\"new-gate\">Add a gate to {{ currentUser.username }}: </label>\n          &nbsp;&nbsp;\n          <input v-model=\"newGateText\" id=\"new-gate\" placeholder=\"e.g. gate-XXXXXX\" />\n          <button>Add</button>\n        </form>\n      </div> -->\n    </div>\n\n    <div v-if=\"successful\">\n      <strong>My ({{ currentUser.my_gate }}) friends: </strong>\n      <ul id=\"uses-list\">\n        <li v-for=\"(item, index) in this.content.users\" :key=\"item\">\n          {{ item }}\n        </li>\n      </ul>\n\n      <b-input-group prepend=\"Friend:\" class=\"mt-3\">\n        <b-form-input v-model=\"email\" :state=\"isEmailValid(this.email)\"></b-form-input>\n        <b-input-group-append>\n          <b-button @click=\"addUser(currentUser.my_gate)\" variant=\"outline-success\"\n            >Add</b-button\n          >\n          <b-button @click=\"deleteUser(currentUser.my_gate)\" variant=\"info\"\n            >Delete</b-button\n          >\n        </b-input-group-append>\n      </b-input-group>\n    </div>\n\n    <div v-if=\"this.showCommandStatus\">\n      <b-alert\n        :show=\"dismissCountDown\"\n        :variant=\"alertVariant\"\n        dismissible\n        @dismiss-count-down=\"countDownChanged\"\n      >\n        {{ this.message }}</b-alert\n      >\n    </div>\n  </div>\n</template>\n\n<script>\nimport UserService from \"../services/user.service\";\n\nexport default {\n  name: \"User\",\n  computed: {\n    currentUser() {\n      return this.$store.state.auth.user;\n    },\n  },\n  data() {\n    return {\n      content: \"\",\n      message: \"\",\n      cmdError: false,\n      showCommandStatus: false,\n      successful: false,\n      newGateText: \"\",\n      msg: [],\n      email: \"\",\n      ismissCountDown: null,\n      showDismissibleAlert: false,\n      alertVariant: \"info\",\n    };\n  },\n  mounted() {\n    UserService.getUserBoard().then(\n      (response) => {\n        this.content = response.data;\n        this.successful = true;\n        this.items = this.content.gates;\n      },\n      (error) => {\n        this.successful = false;\n        this.content =\n          (error.response && error.response.data && error.response.data.message) ||\n          error.message ||\n          error.toString();\n      }\n    );\n  },\n  methods: {\n    addGate: function () {\n      if (this.newGateText != \"\") {\n        this.content.gates.push(this.newGateText);\n        this.newGateText = \"\";\n      }\n    },\n    deleteGate(index) {\n      const currentGate = this.content.gates[index];\n      const myGate = this.content.user_gate;\n      if (currentGate != myGate) {\n        this.content.gates.splice(index, 1);\n      }\n    },\n    isMyGate(index) {\n      const currentGate = this.content.gates[index];\n      const myGate = this.content.my_gate;\n      return currentGate === myGate;\n    },\n    gateCommand(index, cmd) {\n      this.message = \"\";\n      this.cmdError = false;\n      const currentGate = this.content.gates[index];\n      // const myGate = this.content.my_gate;\n      // if (currentGate == myGate) {\n      // open the gate\n      UserService.triggerCommand(this.currentUser, currentGate, cmd).then(\n        (response) => {\n          if (response.isAxiosError || response.is_error) {\n            this.message = response.message;\n            this.showCommandStatus = true;\n            this.showAlert(\"danger\");\n          } else {\n            this.cmdError = response.is_error;\n            this.message = response.message;\n            this.showCommandStatus = !this.cmdError;\n            this.showAlert(\"info\");\n          }\n        },\n        (error) => {\n          this.cmdError = true;\n          this.message =\n            (error.response && error.response.data && error.response.data.message) ||\n            error.message ||\n            error.toString();\n          this.showAlert(\"danger\");\n        }\n      );\n      //}\n    },\n    addUser(gateName) {\n      if (/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(this.email)) {\n        if (!this.content.users.includes(this.email)) {\n          this.content.users.push(this.email);\n        } else {\n        }\n        this.email = \"\";\n      }\n    },\n    deleteUser(gateName) {\n      if (this.email == this.currentUser.email) {\n        return;\n      }\n\n      var index = this.content.users.indexOf(this.email);\n      if (index > -1) {\n        this.content.users.splice(index, 1);\n      }\n    },\n    isEmailValid(value) {\n      if (/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(value)) {\n        return true;\n      }\n      return false;\n    },\n    countDownChanged(dismissCountDown) {\n      this.dismissCountDown = dismissCountDown;\n    },\n    showAlert(variant) {\n      this.dismissCountDown = 2;\n      this.alertVariant = variant;\n    },\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoardUser.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoardUser.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BoardUser.vue?vue&type=template&id=35ab4746&\"\nimport script from \"./BoardUser.vue?vue&type=script&lang=js&\"\nexport * from \"./BoardUser.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}